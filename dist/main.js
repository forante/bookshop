(()=>{"use strict";let t="",e="",o="",n="",i="",s=[],a="";const r=t=>{localStorage.setItem("books",JSON.stringify(t))};let l=0;const c=(t,e)=>{for(let o=0;o<t.length;o++)for(let n=0;n<e.length;n++)t[o].id===e[n].id&&(e[n].cart=!0)};let d=[],L=[],g=[];const v=v=>{v.forEach((t=>{d={id:t.id,img:t.volumeInfo.imageLinks,authors:t.volumeInfo.authors,title:t.volumeInfo.title,averageRating:t.volumeInfo.averageRating,ratingsCount:t.volumeInfo.ratingsCount,description:t.volumeInfo.description,price:t.saleInfo.retailPrice,cart:!1},L=[...L,d],g=[...g,d]})),(()=>{const t=JSON.parse(localStorage.getItem("books"));t.length&&(l=t.length,w.classList.add("active"),w.innerText=l,p=t,localStorage.clear(),c(p,g))})(),r(p),c(p,g),(r=>{r.forEach((r=>{((a,r,l,c,d,L,g,v,u)=>{if(r=r?r.thumbnail:"http://books.google.com/books/content?id=R-qkwPz5Tâ€¦=frontcover&img=1&zoom=1&edge=curl&source=gbs_api",l&&(l=l.join()),d&&L){for(let t=0;t<5;t++)t<=Math.round(d)?s[t]="#F2C94C":s[t]="#EEEDF5";e=""}else e="none";g?(o="",g.length>90&&(g=g.slice(0,90),g+="...")):o="none",v=v?`${v.currencyCode} ${v.amount}`:"",!0===u?(n="book__button-cart",i="in the cart"):(n="",i="buy now"),t=`<div class="book" data-id=${a}>\n  <div class="book__img">\n    <img src=${r} alt="book image">\n  </div>\n  <div class="book__info">\n    <div class="book__autor">${l}</div>\n    <h3 class="book__title">${c}</h3>\n    <div class="book__rating ${e}">\n      <div class="book__rating-stars">\n        <svg width="12" height="11" viewBox="0 0 12 11" fill="none" xmlns="http://www.w3.org/2000/svg">\n        <path d="M6 0L7.80568 3.5147L11.7063 4.1459L8.92165 6.9493L9.52671 10.8541L6 9.072L2.47329 10.8541L3.07835 6.9493L0.293661 4.1459L4.19432 3.5147L6 0Z" fill="${s[0]}"/>\n        </svg>\n        <svg width="12" height="11" viewBox="0 0 12 11" fill="none" xmlns="http://www.w3.org/2000/svg">\n        <path d="M6 0L7.80568 3.5147L11.7063 4.1459L8.92165 6.9493L9.52671 10.8541L6 9.072L2.47329 10.8541L3.07835 6.9493L0.293661 4.1459L4.19432 3.5147L6 0Z" fill="${s[1]}"/>\n        </svg>\n        <svg width="12" height="11" viewBox="0 0 12 11" fill="none" xmlns="http://www.w3.org/2000/svg">\n        <path d="M6 0L7.80568 3.5147L11.7063 4.1459L8.92165 6.9493L9.52671 10.8541L6 9.072L2.47329 10.8541L3.07835 6.9493L0.293661 4.1459L4.19432 3.5147L6 0Z" fill="${s[2]}"/>\n        </svg>\n        <svg width="12" height="11" viewBox="0 0 12 11" fill="none" xmlns="http://www.w3.org/2000/svg">\n        <path d="M6 0L7.80568 3.5147L11.7063 4.1459L8.92165 6.9493L9.52671 10.8541L6 9.072L2.47329 10.8541L3.07835 6.9493L0.293661 4.1459L4.19432 3.5147L6 0Z" fill="${s[3]}"/>\n        </svg>\n        <svg width="12" height="11" viewBox="0 0 12 11" fill="none" xmlns="http://www.w3.org/2000/svg">\n        <path d="M6 0L7.80568 3.5147L11.7063 4.1459L8.92165 6.9493L9.52671 10.8541L6 9.072L2.47329 10.8541L3.07835 6.9493L0.293661 4.1459L4.19432 3.5147L6 0Z" fill="${s[4]}"/>\n        </svg>\n      </div> \n      <div class="book__rating-number">${L} review</div> \n    </div>\n    <p class="book__subtitle ${o}">${g}</p>\n    <div class="book__price">${v}</div>\n    <button class="book__button btn ${n}">${i}</button>\n  </div>\n</div>`})(r.id,r.img,r.authors,r.title,r.averageRating,r.ratingsCount,r.description,r.price,r.cart),a+=t}))})(L)},u=async(t,e=0)=>{const o=await fetch(`https://www.googleapis.com/books/v1/volumes?q=%22subject:${t}%22&key=AIzaSyC3riYNFOWzXLn6UuIBWevbyY5QtmOsrIo&printType=books&startIndex=${e}&maxResults=6&langRestrict=en`),n=await o.json();v(n.items)},h=["Architecture","Art&Fashion","Biography","Business","Crafts&Hobbies","Drama","Fiction","Food&Drink","Health&Wellbeing","History&Politics","Humor","Poetry","Psychology","Science","Technology","Travel&Maps"],b=document.querySelectorAll(".categories__item"),m=document.querySelector(".books"),_=document.querySelector(".book__load"),w=document.querySelector(".iconsbar__cart-count");let f=0,k=0,p=[];b.forEach(((t,e)=>{t.addEventListener("click",(()=>{y(e),k=e}))})),m.addEventListener("click",(t=>{if(t.target.classList.contains("book__button")){const e=t.target.parentNode.parentNode,o=e.querySelector(".book__button");o.classList.contains("book__button-cart")?((t,e)=>{t.classList.remove("book__button-cart"),t.innerText="buy now",l--,w.innerText=l,0===l&&w.classList.remove("active"),p=p.filter((t=>e.dataset.id!==t.id)),r(p)})(o,e):((t,e)=>{t.classList.add("book__button-cart"),t.innerText="in the cart",w.classList.add("active"),l++,w.innerText=l,g.forEach((t=>{e.dataset.id===t.id&&p.push(t)})),r(p)})(o,e)}})),_.addEventListener("click",(async()=>{f+=6,a="",L="",await u(h[k],f),m.innerHTML=m.innerHTML+a}));const y=async t=>{a="",L=[],g=[],await u(h[t]),b.forEach((t=>{t.classList.remove("active")})),b[t].classList.add("active"),m.innerHTML="",m.innerHTML=m.innerHTML+a,L=[],f=0};(()=>{const t=document.querySelectorAll(".slider__img"),e=document.querySelectorAll(".slider__nav-num");let o=0;function n(){i(t),i(e)}function i(t){for(let e of t)e.classList.remove("active");t[o].classList.add("active")}e.forEach(((t,e)=>{t.addEventListener("click",(()=>{o=e,n()}))})),document.addEventListener("DOMContentLoaded",(()=>{setInterval((()=>{o++,o>e.length-1&&(o=0),n()}),5e3)}))})(),async function(t=0){await u(h[t]),m.innerHTML=m.innerHTML+a}()})();