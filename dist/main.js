(()=>{"use strict";let t="",e="",o="",n="",i="";let s=[],a=[],l=[];const r=async(r,c=0)=>{const d=await fetch(`https://www.googleapis.com/books/v1/volumes?q=%22subject:${r}%22&key=AIzaSyC3riYNFOWzXLn6UuIBWevbyY5QtmOsrIo&printType=books&startIndex=${c}&maxResults=6&langRestrict=en`);(r=>{r.forEach((t=>{s={id:t.id,img:t.volumeInfo.imageLinks,authors:t.volumeInfo.authors,title:t.volumeInfo.title,averageRating:t.volumeInfo.averageRating,ratingsCount:t.volumeInfo.ratingsCount,description:t.volumeInfo.description,price:t.saleInfo.retailPrice,cart:!1},a=[...a,s],l=[...l,s]}));const c=JSON.parse(localStorage.getItem("books"));if(c){b=c.length,console.log(b),v.classList.add("active"),v.innerText=b,m=c,localStorage.clear();for(let t=0;t<m.length;t++)for(let e=0;e<l.length;e++)m[t].id===l[e].id&&(l[e].cart=!0)}(s=>{s.forEach((s=>{var a,l,r,c,d,L,g,v,u;a=s.id,l=s.img,r=s.authors,c=s.title,d=s.averageRating,L=s.ratingsCount,g=s.description,v=s.price,u=s.cart,l=l?l.thumbnail:"http://books.google.com/books/content?id=R-qkwPz5Tâ€¦=frontcover&img=1&zoom=1&edge=curl&source=gbs_api",r&&(r=r.join()),d&&L?(console.log(L),e=""):e="none",g?(o="",g.length>90&&(g=g.slice(0,90),g+="...")):o="none",v=v?`${v.currencyCode} ${v.amount}`:"",n=!0===u?"book__button-cart":"",t=`<div class="book" data-id=${a}>\n  <div class="book__img">\n    <img src=${l} alt="">\n  </div>\n  <div class="book__info">\n    <div class="book__autor">${r}</div>\n    <h3 class="book__title">${c}</h3>\n    <div class="book__rating ${e}">\n      <div class="book__rating-stars">\n        <svg width="12" height="11" viewBox="0 0 12 11" fill="none" xmlns="http://www.w3.org/2000/svg">\n        <path d="M6 0L7.80568 3.5147L11.7063 4.1459L8.92165 6.9493L9.52671 10.8541L6 9.072L2.47329 10.8541L3.07835 6.9493L0.293661 4.1459L4.19432 3.5147L6 0Z" fill="#EEEDF5"/>\n        </svg>\n        <svg width="12" height="11" viewBox="0 0 12 11" fill="none" xmlns="http://www.w3.org/2000/svg">\n        <path d="M6 0L7.80568 3.5147L11.7063 4.1459L8.92165 6.9493L9.52671 10.8541L6 9.072L2.47329 10.8541L3.07835 6.9493L0.293661 4.1459L4.19432 3.5147L6 0Z" fill="#EEEDF5"/>\n        </svg>\n        <svg width="12" height="11" viewBox="0 0 12 11" fill="none" xmlns="http://www.w3.org/2000/svg">\n        <path d="M6 0L7.80568 3.5147L11.7063 4.1459L8.92165 6.9493L9.52671 10.8541L6 9.072L2.47329 10.8541L3.07835 6.9493L0.293661 4.1459L4.19432 3.5147L6 0Z" fill="#EEEDF5"/>\n        </svg>\n        <svg width="12" height="11" viewBox="0 0 12 11" fill="none" xmlns="http://www.w3.org/2000/svg">\n        <path d="M6 0L7.80568 3.5147L11.7063 4.1459L8.92165 6.9493L9.52671 10.8541L6 9.072L2.47329 10.8541L3.07835 6.9493L0.293661 4.1459L4.19432 3.5147L6 0Z" fill="#EEEDF5"/>\n        </svg>\n        <svg width="12" height="11" viewBox="0 0 12 11" fill="none" xmlns="http://www.w3.org/2000/svg">\n        <path d="M6 0L7.80568 3.5147L11.7063 4.1459L8.92165 6.9493L9.52671 10.8541L6 9.072L2.47329 10.8541L3.07835 6.9493L0.293661 4.1459L4.19432 3.5147L6 0Z" fill="#EEEDF5"/>\n        </svg>\n      </div> \n      <div class="book__rating-number">${L} review</div> \n    </div>\n    <p class="book__subtitle ${o}">${g}</p>\n    <div class="book__price">${v}</div>\n    <button class="book__button btn ${n}">buy now</button>\n  </div>\n</div>`,i+=t}))})(a)})((await d.json()).items)},c=["Architecture","Art&Fashion","Biography","Business","Crafts&Hobbies","Drama","Fiction","Food&Drink","Health&Wellbeing","History&Politics","Humor","Poetry","Psychology","Science","Technology","Travel&Maps"],d=document.querySelectorAll(".categories__item"),L=document.querySelector(".books"),g=document.querySelector(".book__load"),v=document.querySelector(".iconsbar__cart-count");let u=0,h=0,b=0,m=[];d.forEach(((t,e)=>{t.addEventListener("click",(()=>{_(e),h=e}))})),L.addEventListener("click",(t=>{if(t.target.classList.contains("book__button")){const e=t.target.parentNode.parentNode,o=e.querySelector(".book__button");console.log(e.dataset.id),o.classList.contains("book__button-cart")?f(o,e):w(o,e)}})),g.addEventListener("click",(async()=>{u+=6,i="",a="",await r(c[h],u),L.innerHTML=L.innerHTML+i}));const _=async t=>{i="",a=[],l=[],await r(c[t]),d.forEach((t=>{t.classList.remove("active")})),d[t].classList.add("active"),L.innerHTML="",L.innerHTML=L.innerHTML+i,a=[],u=0},w=(t,e)=>{t.classList.add("book__button-cart"),t.innerText="in the cart",v.classList.add("active"),b++,v.innerText=b,l.forEach((t=>{e.dataset.id===t.id&&m.push(t)})),k(m)},f=(t,e)=>{t.classList.remove("book__button-cart"),t.innerText="buy now",b--,v.innerText=b,0===b&&v.classList.remove("active"),m=m.filter((t=>e.dataset.id!==t.id)),k(m)},k=t=>{localStorage.setItem("books",JSON.stringify(t))};(()=>{const t=document.querySelectorAll(".slider__img"),e=document.querySelectorAll(".slider__nav-num");let o=0;function n(){i(t),i(e)}function i(t){for(let e of t)e.classList.remove("active");t[o].classList.add("active")}e.forEach(((t,e)=>{t.addEventListener("click",(()=>{o=e,n()}))})),document.addEventListener("DOMContentLoaded",(()=>{setInterval((()=>{o++,o>e.length-1&&(o=0),n()}),5e3)}))})(),async function(t=0){await r(c[t]),L.innerHTML=L.innerHTML+i}()})();